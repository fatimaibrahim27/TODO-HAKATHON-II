# API Contracts: Full-Stack Todo Web Application

## User Authentication Endpoints

### POST /api/auth/register
**Description**: Register a new user account
- **Request Body**:
  ```json
  {
    "email": "string (required, valid email)",
    "name": "string (optional)",
    "password": "string (required, min 8 chars)"
  }
  ```
- **Response 201**: User created successfully
  ```json
  {
    "id": "uuid",
    "email": "string",
    "name": "string",
    "created_at": "datetime"
  }
  ```
- **Response 400**: Validation error or email already exists
- **Response 422**: Unprocessable entity (validation errors)

### POST /api/auth/login
**Description**: Authenticate user and return JWT token
- **Request Body**:
  ```json
  {
    "email": "string (required)",
    "password": "string (required)"
  }
  ```
- **Response 200**: Authentication successful
  ```json
  {
    "access_token": "jwt_token",
    "token_type": "bearer",
    "user": {
      "id": "uuid",
      "email": "string",
      "name": "string"
    }
  }
  ```
- **Response 401**: Invalid credentials
- **Response 422**: Unprocessable entity (validation errors)

### POST /api/auth/logout
**Description**: Logout user and invalidate token
- **Headers**: Authorization: Bearer {token}
- **Response 200**: Logout successful

## Todo Management Endpoints

### GET /api/todos
**Description**: Get all todos for the authenticated user
- **Headers**: Authorization: Bearer {token}
- **Query Parameters**:
  - completed: boolean (optional, filter by completion status)
  - priority: string (optional, filter by priority level)
- **Response 200**: List of todos
  ```json
  [
    {
      "id": "uuid",
      "title": "string",
      "description": "string",
      "completed": "boolean",
      "priority": "string",
      "due_date": "datetime (nullable)",
      "created_at": "datetime",
      "updated_at": "datetime",
      "user_id": "uuid"
    }
  ]
  ```

### POST /api/todos
**Description**: Create a new todo for the authenticated user
- **Headers**: Authorization: Bearer {token}
- **Request Body**:
  ```json
  {
    "title": "string (required)",
    "description": "string (optional)",
    "priority": "string (optional, default: 'medium')",
    "due_date": "datetime (optional)"
  }
  ```
- **Response 201**: Todo created successfully
  ```json
  {
    "id": "uuid",
    "title": "string",
    "description": "string",
    "completed": "boolean (default: false)",
    "priority": "string",
    "due_date": "datetime (nullable)",
    "created_at": "datetime",
    "updated_at": "datetime",
    "user_id": "uuid"
  }
  ```
- **Response 400**: Validation error
- **Response 401**: Unauthorized (invalid/missing token)

### GET /api/todos/{todo_id}
**Description**: Get a specific todo by ID
- **Headers**: Authorization: Bearer {token}
- **Parameters**:
  - todo_id: uuid (required)
- **Response 200**: Todo found
  ```json
  {
    "id": "uuid",
    "title": "string",
    "description": "string",
    "completed": "boolean",
    "priority": "string",
    "due_date": "datetime (nullable)",
    "created_at": "datetime",
    "updated_at": "datetime",
    "user_id": "uuid"
  }
  ```
- **Response 401**: Unauthorized (invalid/missing token)
- **Response 403**: Forbidden (user doesn't own the todo)
- **Response 404**: Todo not found

### PUT /api/todos/{todo_id}
**Description**: Update an existing todo
- **Headers**: Authorization: Bearer {token}
- **Parameters**:
  - todo_id: uuid (required)
- **Request Body**:
  ```json
  {
    "title": "string (optional)",
    "description": "string (optional)",
    "priority": "string (optional)",
    "due_date": "datetime (optional)",
    "completed": "boolean (optional)"
  }
  ```
- **Response 200**: Todo updated successfully
  ```json
  {
    "id": "uuid",
    "title": "string",
    "description": "string",
    "completed": "boolean",
    "priority": "string",
    "due_date": "datetime (nullable)",
    "created_at": "datetime",
    "updated_at": "datetime",
    "user_id": "uuid"
  }
  ```
- **Response 400**: Validation error
- **Response 401**: Unauthorized (invalid/missing token)
- **Response 403**: Forbidden (user doesn't own the todo)
- **Response 404**: Todo not found

### DELETE /api/todos/{todo_id}
**Description**: Delete a todo
- **Headers**: Authorization: Bearer {token}
- **Parameters**:
  - todo_id: uuid (required)
- **Response 204**: Todo deleted successfully
- **Response 401**: Unauthorized (invalid/missing token)
- **Response 403**: Forbidden (user doesn't own the todo)
- **Response 404**: Todo not found

### PATCH /api/todos/{todo_id}/toggle-complete
**Description**: Toggle the completion status of a todo
- **Headers**: Authorization: Bearer {token}
- **Parameters**:
  - todo_id: uuid (required)
- **Response 200**: Todo completion status toggled
  ```json
  {
    "id": "uuid",
    "title": "string",
    "description": "string",
    "completed": "boolean",
    "priority": "string",
    "due_date": "datetime (nullable)",
    "created_at": "datetime",
    "updated_at": "datetime",
    "user_id": "uuid"
  }
  ```
- **Response 401**: Unauthorized (invalid/missing token)
- **Response 403**: Forbidden (user doesn't own the todo)
- **Response 404**: Todo not found